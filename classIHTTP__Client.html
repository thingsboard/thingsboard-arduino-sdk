<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ThingsBoard Client SDK: IHTTP_Client Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">ThingsBoard Client SDK<span id="projectnumber">&#160;0.15.0</span>
   </div>
   <div id="projectbrief">Client SDK to connect with ThingsBoard IoT Platform from IoT devices (Arduino, Espressif, etc.)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classIHTTP__Client-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">IHTTP_Client Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div></div>
</div><!--header-->
<div class="contents">

<p>HTTP Client interface that contains the method that a class that can be used to send and receive data over an HTTP conection should implement. Seperates the specific implementation used from the ThingsBoardHttp client, allows to use different clients depending on different needs. In this case the main use case of the seperation is to both support Espressif IDF and Arduino with the following libraries as recommendations. The default HTTP Client for Arduino is the ArduinoHttpClient (<a href="https://github.com/arduino-libraries/ArduinoHttpClient">https://github.com/arduino-libraries/ArduinoHttpClient</a>), For Espressif IDF however the default HTTP Client is the esp-http-client (<a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/protocols/esp_http_client.html">https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/protocols/esp_http_client.html</a>) component.  
 <a href="classIHTTP__Client.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="IHTTP__Client_8h_source.html">IHTTP_Client.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7dfad1a10e35eb8c4af995bfd641656b"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIHTTP__Client.html#a7dfad1a10e35eb8c4af995bfd641656b">set_keep_alive</a> (bool keep_alive)=0</td></tr>
<tr class="memdesc:a7dfad1a10e35eb8c4af995bfd641656b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets whether to close the HTTP connection for every single request and reconnect once a new request is sent.  <a href="classIHTTP__Client.html#a7dfad1a10e35eb8c4af995bfd641656b">More...</a><br /></td></tr>
<tr class="separator:a7dfad1a10e35eb8c4af995bfd641656b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae38c40120a5bcd7d93b2013ce246f6f0"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIHTTP__Client.html#ae38c40120a5bcd7d93b2013ce246f6f0">connect</a> (<a class="el" href="classchar.html">char</a> const *host, uint16_t port)=0</td></tr>
<tr class="memdesc:ae38c40120a5bcd7d93b2013ce246f6f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connects to the given server instance that should be connected to over the defined port.  <a href="classIHTTP__Client.html#ae38c40120a5bcd7d93b2013ce246f6f0">More...</a><br /></td></tr>
<tr class="separator:ae38c40120a5bcd7d93b2013ce246f6f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13a3dd4339b3694872e1fd0bf85ca369"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIHTTP__Client.html#a13a3dd4339b3694872e1fd0bf85ca369">stop</a> ()=0</td></tr>
<tr class="memdesc:a13a3dd4339b3694872e1fd0bf85ca369"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disconnects the given device from the current host and clears about any remaining bytes still in the reponse body.  <a href="classIHTTP__Client.html#a13a3dd4339b3694872e1fd0bf85ca369">More...</a><br /></td></tr>
<tr class="separator:a13a3dd4339b3694872e1fd0bf85ca369"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f16036f41a49e6541132f03afe74aa9"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIHTTP__Client.html#a0f16036f41a49e6541132f03afe74aa9">post</a> (<a class="el" href="classchar.html">char</a> const *url_path, <a class="el" href="classchar.html">char</a> const *content_type, <a class="el" href="classchar.html">char</a> const *request_body)=0</td></tr>
<tr class="memdesc:a0f16036f41a49e6541132f03afe74aa9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connects to the server and sends a POST request with a body and content type.  <a href="classIHTTP__Client.html#a0f16036f41a49e6541132f03afe74aa9">More...</a><br /></td></tr>
<tr class="separator:a0f16036f41a49e6541132f03afe74aa9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdc5f6ee462b83eeb58691973eb64ed2"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIHTTP__Client.html#afdc5f6ee462b83eeb58691973eb64ed2">get_response_status_code</a> ()=0</td></tr>
<tr class="memdesc:afdc5f6ee462b83eeb58691973eb64ed2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the HTTP status code contained in the server response. Should follow the HTTP standard, meaning 200 for a successful request or 404 for file not found, see <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status">https://developer.mozilla.org/en-US/docs/Web/HTTP/Status</a> for more information on all standard status codes.  <a href="classIHTTP__Client.html#afdc5f6ee462b83eeb58691973eb64ed2">More...</a><br /></td></tr>
<tr class="separator:afdc5f6ee462b83eeb58691973eb64ed2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f8396f757b4fd29ebb5dcc1c200e864"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIHTTP__Client.html#a5f8396f757b4fd29ebb5dcc1c200e864">get</a> (const <a class="el" href="classchar.html">char</a> *url_path)=0</td></tr>
<tr class="memdesc:a5f8396f757b4fd29ebb5dcc1c200e864"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connects to the server and sends a GET request.  <a href="classIHTTP__Client.html#a5f8396f757b4fd29ebb5dcc1c200e864">More...</a><br /></td></tr>
<tr class="separator:a5f8396f757b4fd29ebb5dcc1c200e864"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d399b52b5f3b6d61125bbdfaec646c5"><td class="memItemLeft" align="right" valign="top">virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIHTTP__Client.html#a6d399b52b5f3b6d61125bbdfaec646c5">get_response_body</a> ()=0</td></tr>
<tr class="memdesc:a6d399b52b5f3b6d61125bbdfaec646c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the response body of a previously sent message as a string object, skips any response headers if they have not been read already, should be called after calling <a class="el" href="classIHTTP__Client.html#afdc5f6ee462b83eeb58691973eb64ed2" title="Gets the HTTP status code contained in the server response. Should follow the HTTP standard,...">get_response_status_code()</a> and ensuring the request was successful.  <a href="classIHTTP__Client.html#a6d399b52b5f3b6d61125bbdfaec646c5">More...</a><br /></td></tr>
<tr class="separator:a6d399b52b5f3b6d61125bbdfaec646c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >HTTP Client interface that contains the method that a class that can be used to send and receive data over an HTTP conection should implement. Seperates the specific implementation used from the ThingsBoardHttp client, allows to use different clients depending on different needs. In this case the main use case of the seperation is to both support Espressif IDF and Arduino with the following libraries as recommendations. The default HTTP Client for Arduino is the ArduinoHttpClient (<a href="https://github.com/arduino-libraries/ArduinoHttpClient">https://github.com/arduino-libraries/ArduinoHttpClient</a>), For Espressif IDF however the default HTTP Client is the esp-http-client (<a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/protocols/esp_http_client.html">https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/protocols/esp_http_client.html</a>) component. </p>
<p >and for Espressif IDF the implementations has not been created yet, the implementations have been tested and should be compatible when used in conjunction with the ThingsBoardHttp client. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ae38c40120a5bcd7d93b2013ce246f6f0" name="ae38c40120a5bcd7d93b2013ce246f6f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae38c40120a5bcd7d93b2013ce246f6f0">&#9670;&#160;</a></span>connect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int IHTTP_Client::connect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classchar.html">char</a> const *&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Connects to the given server instance that should be connected to over the defined port. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">host</td><td>Server instance name the client should connect too </td></tr>
    <tr><td class="paramname">port</td><td>Port that will be used to establish a connection and send / receive data Should be either 80 for unencrypted HTTP or 443 for HTTPS with encryption. The latter is recommended if relevant data is sent or if the client receives and handles requests from the server, because using an unencrpyted connection, will allow 3rd parties to listen to the communication and impersonate the server sending payloads which might influence the device in unexpected ways. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Whether the client could establish the connection successfully with return code 0 or failed with error code otherwise </dd></dl>

</div>
</div>
<a id="a5f8396f757b4fd29ebb5dcc1c200e864" name="a5f8396f757b4fd29ebb5dcc1c200e864"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f8396f757b4fd29ebb5dcc1c200e864">&#9670;&#160;</a></span>get()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int IHTTP_Client::get </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classchar.html">char</a> *&#160;</td>
          <td class="paramname"><em>url_path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Connects to the server and sends a GET request. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">url_path</td><td>URL the GET request should be sent too </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Whether the request was successful or not, returns 0 if successful or if not the internal error code </dd></dl>

</div>
</div>
<a id="a6d399b52b5f3b6d61125bbdfaec646c5" name="a6d399b52b5f3b6d61125bbdfaec646c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d399b52b5f3b6d61125bbdfaec646c5">&#9670;&#160;</a></span>get_response_body()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::string IHTTP_Client::get_response_body </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the response body of a previously sent message as a string object, skips any response headers if they have not been read already, should be called after calling <a class="el" href="classIHTTP__Client.html#afdc5f6ee462b83eeb58691973eb64ed2" title="Gets the HTTP status code contained in the server response. Should follow the HTTP standard,...">get_response_status_code()</a> and ensuring the request was successful. </p>
<dl class="section return"><dt>Returns</dt><dd>Response body of a request </dd></dl>

</div>
</div>
<a id="afdc5f6ee462b83eeb58691973eb64ed2" name="afdc5f6ee462b83eeb58691973eb64ed2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdc5f6ee462b83eeb58691973eb64ed2">&#9670;&#160;</a></span>get_response_status_code()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int IHTTP_Client::get_response_status_code </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the HTTP status code contained in the server response. Should follow the HTTP standard, meaning 200 for a successful request or 404 for file not found, see <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status">https://developer.mozilla.org/en-US/docs/Web/HTTP/Status</a> for more information on all standard status codes. </p>
<dl class="section return"><dt>Returns</dt><dd>Current HTTP status code from the server response </dd></dl>

</div>
</div>
<a id="a0f16036f41a49e6541132f03afe74aa9" name="a0f16036f41a49e6541132f03afe74aa9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f16036f41a49e6541132f03afe74aa9">&#9670;&#160;</a></span>post()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int IHTTP_Client::post </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classchar.html">char</a> const *&#160;</td>
          <td class="paramname"><em>url_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classchar.html">char</a> const *&#160;</td>
          <td class="paramname"><em>content_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classchar.html">char</a> const *&#160;</td>
          <td class="paramname"><em>request_body</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Connects to the server and sends a POST request with a body and content type. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">url_path</td><td>URL the POST request should be sent too </td></tr>
    <tr><td class="paramname">content_type</td><td>Type of the content that is sent will be JSON data most of the time </td></tr>
    <tr><td class="paramname">request_body</td><td>Request body containing data of the given content type </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Whether the request was successful or not, returns 0 if successful or if not the internal error code </dd></dl>

</div>
</div>
<a id="a7dfad1a10e35eb8c4af995bfd641656b" name="a7dfad1a10e35eb8c4af995bfd641656b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7dfad1a10e35eb8c4af995bfd641656b">&#9670;&#160;</a></span>set_keep_alive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void IHTTP_Client::set_keep_alive </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>keep_alive</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets whether to close the HTTP connection for every single request and reconnect once a new request is sent. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">keep_alive</td><td>Enable or disable to keep the connection alive after a message has been sent. Is recommended to be always enabled to improve performance and speed, because opening a new connection takes a while especially when using HTTPS </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a13a3dd4339b3694872e1fd0bf85ca369" name="a13a3dd4339b3694872e1fd0bf85ca369"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13a3dd4339b3694872e1fd0bf85ca369">&#9670;&#160;</a></span>stop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void IHTTP_Client::stop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Disconnects the given device from the current host and clears about any remaining bytes still in the reponse body. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/<a class="el" href="IHTTP__Client_8h_source.html">IHTTP_Client.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
